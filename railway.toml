[build]
builder = "NIXPACKS"

[deploy]
startCommand = "gunicorn 'symbols_mcp.server:flask_app' --bind 0.0.0.0:$PORT --workers 2"
healthcheckPath = "/health"
healthcheckTimeout = 100
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

[[services]]
name = "symbols-mcp"
source = "."

[services.variables]
PORT = "8080"
PYTHON_VERSION = "3.11"
RAILWAY_ENVIRONMENT = "production"
FLASK_APP = "proxy_api.py"

# Environment variables should be set in Railway dashboard
# Do not reference them here to avoid secret detection

[[services.ports]]
port = 8080
protocol = "HTTP"
